# Environment template for the Next.js app and realtime server.
# Copy this file to .env.local (Next.js) and/or .env (Docker) and adjust the
# values for your deployment. Secrets should be replaced with strong random
# strings (e.g. via `openssl rand -base64 32`).

# ------------------------------------------------------------------------------
# Shared application secrets and toggles
# ------------------------------------------------------------------------------
AUTH_SECRET=change-me-with-a-long-random-string
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/theater?schema=public

# Mirror to the client to avoid hydration mismatches ("1" enables dev-only login)
NEXT_PUBLIC_AUTH_DEV_NO_DB=0
# Enable the PWA service worker and offline capabilities ("1" enables, "0" disables).
NEXT_PUBLIC_PWA_ENABLED=0
# Maximum number of queued mutations that are flushed per sync cycle.
SYNC_BATCH_LIMIT=50
# Optional: Override the quick login buttons shown on /login in dev/test environments.
#NEXT_PUBLIC_AUTH_DEV_TEST_USERS=member@example.com,cast@example.com,tech@example.com

# Optional: ICS feed for s√§chsische Schulferien. Wird genutzt, um die Sperrliste zu annotieren.
#SAXONY_HOLIDAYS_ICS_URL=https://www.feiertage-deutschland.de/kalender-download/ics/schulferien-sachsen.ics
# Optional: Deaktiviert ausgehende HTTP-Abfragen und aktiviert den statischen Ferien-Datensatz.
#OUTBOUND_HTTP_DISABLED=0

# Realtime service authentication
REALTIME_AUTH_TOKEN=replace-with-realtime-token
REALTIME_SERVER_TOKEN=replace-with-realtime-token
REALTIME_HANDSHAKE_SECRET=replace-with-realtime-token
REALTIME_HANDSHAKE_TTL=900
REALTIME_SERVER_EVENT_PATH=/events

# API route protection for scheduled tasks
CRON_SECRET=replace-with-cron-secret

# ------------------------------------------------------------------------------
# Email delivery (choose one provider)
# ------------------------------------------------------------------------------
EMAIL_SERVER=smtp://user:pass@mail.example.com:587
EMAIL_FROM="Theaterverein <noreply@example.com>"
#EMAIL_SERVICE=sendgrid
#SENDGRID_API_KEY=your_sendgrid_api_key

# ------------------------------------------------------------------------------
# Socket / realtime defaults
# ------------------------------------------------------------------------------
NEXT_PUBLIC_REALTIME_PATH=/socket.io
SOCKET_PATH=/socket.io
EVENT_PATH=/events
PORT=4001
REALTIME_BASE_PATH=/realtime
# Internal origin is used when the Next.js server emits events to the realtime
# process. When both run inside one container the default 127.0.0.1 origin is
# suitable. Override this if the combined image should talk to an external
# realtime instance.
REALTIME_INTERNAL_ORIGIN=http://127.0.0.1:3000
# Optionally override the publicly exposed origin that the browser should use
# when connecting to the realtime endpoint. Leave unset to fall back to the
# relative REALTIME_BASE_PATH.
#REALTIME_PUBLIC_ORIGIN=https://example.com

# ------------------------------------------------------------------------------
# Deployment targets
# ------------------------------------------------------------------------------
# Keep NEXTAUTH_URL and NEXT_PUBLIC_BASE_URL identical and without trailing slash.

# Development deployment (devtheater.beegreenx.de)
NEXTAUTH_URL=https://devtheater.beegreenx.de
NEXT_PUBLIC_BASE_URL=https://devtheater.beegreenx.de
#NEXT_PUBLIC_REALTIME_URL=https://devtheater.beegreenx.de/realtime
#REALTIME_SERVER_URL=https://devtheater.beegreenx.de/realtime
CORS_ORIGIN=https://devtheater.beegreenx.de
#REALTIME_CORS_ORIGIN=https://devtheater.beegreenx.de

# Production deployment (prodtheater.beegreenx.de)
#NEXTAUTH_URL=https://prodtheater.beegreenx.de
#NEXT_PUBLIC_BASE_URL=https://prodtheater.beegreenx.de
#NEXT_PUBLIC_REALTIME_URL=https://prodtheater.beegreenx.de/realtime
#REALTIME_SERVER_URL=https://prodtheater.beegreenx.de/realtime
#CORS_ORIGIN=https://prodtheater.beegreenx.de
#REALTIME_CORS_ORIGIN=https://prodtheater.beegreenx.de

# ------------------------------------------------------------------------------
# Auto-deploy webhook service (docker-compose.autodeploy.yml)
# ------------------------------------------------------------------------------
#AUTO_DEPLOY_GIT_REMOTE_URL=git@github.com:ORG/Website.git
#AUTO_DEPLOY_GIT_HTTP_USERNAME=git
#AUTO_DEPLOY_GIT_HTTP_PASSWORD=ghp_your-token
#AUTO_DEPLOY_GIT_HTTP_TOKEN=ghp_your-token
#AUTO_DEPLOY_GIT_CREDENTIAL_STORE_PATH=/tmp/git-credentials
#AUTO_DEPLOY_GIT_SSH_PRIVATE_KEY="-----BEGIN OPENSSH PRIVATE KEY-----\n...\n-----END OPENSSH PRIVATE KEY-----"
#AUTO_DEPLOY_GIT_SSH_KNOWN_HOSTS=github.com ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAA...
#AUTO_DEPLOY_WEBHOOK_SECRET=replace-with-strong-secret
#AUTO_DEPLOY_TARGET_BRANCH=main
#AUTO_DEPLOY_ENV=prod
#AUTO_DEPLOY_SERVICE_NAME=app-prod
#AUTO_DEPLOY_PROJECT_NAME=theater
#AUTO_DEPLOY_LISTEN_PORT=3000
#AUTO_DEPLOY_WEBHOOK_PORT=9000
#AUTO_DEPLOY_WEBHOOK_PATH=/webhook
#AUTO_DEPLOY_HOST=autodeploy.example.com
#AUTO_DEPLOY_TRAEFIK_ENTRYPOINTS=websecure
#AUTO_DEPLOY_TRAEFIK_CERT_RESOLVER=myresolver
